### Benchmark on complex puzzles (remove `2>/dev/null` to see the picture)

```
# use redirection tricks to swap outputs to grep only logs, not the picture
# https://stackoverflow.com/a/2381643/1177288

# http://webpbn.com/pbnsolve.html
for i in 1611 1694 6739 4645 2040 2712 6574 8098 2556; do
    echo "Solving PBN's puzzle #$i (http://webpbn.com/$i) ..."
    time python -m pynogram --pbn $i --timeout=1200 --max-solutions=2 --draw-final -v 3>&- 2>/dev/null 3>&1 1>&2 2>&3 |
        grep -i contradict
done

for i in football einstein MLP; do
    echo "Solving local puzzle $i ..."
    time python -m pynogram --board $i --draw-final -v 3>&- 2>/dev/null 3>&1 1>&2 2>&3 |
        grep -i contradict
done
```

Currently it gives these numbers on the fast (_Intel(R) Xeon(R) CPU E3-1275 v5 @ 3.60GHz_)
and slower (_Intel(R) Core(TM) i5 CPU  M 560  @ 2.67GHz_) CPUs:

| Name      | Fast CPU, sec | Slow CPU, sec | Contradictions found | Solution rate, % | Solutions found | Search depth |
|-----------|--------------:|--------------:|:--------------------:|-----------------:|----------------:|-------------:|
|-- webpbn.com --
| 1611      | 1.74          | 2.34          | 18                   | 100
| 1694      | 2.14          | 3.93          | 99                   | 100
| **6739**  | 2.90          | 5.05          | 95                   | **98.5625**      | 3 | 1
| 4645      | 5.16          | 9.14          | 33                   | 100
| 2040      | 6.20          | 11.49         | 204                  | 100
| **2712**  | >1200         | >1200         | 149, 8               | **54.7759**      | 0 | 31
| **6574**  | >1200         | >1200         | 44, 2                | **29.6**         | 1 | 97
| **8098**  | >1200         | >1200         | 0                    | **0**            | 1 | 75
| **2556**  | 40            | 70            | 8                    | **92.7179**      | 2 | 50
|-- Local --
| [football](../pynogram/examples/football.txt) | 0.41  | 0.52  | 1 (6)    | 100
| [einstein](../pynogram/examples/einstein.txt) | 1.42  | 1.96  | 0        | 100
| [MLP](../pynogram/examples/MLP.txt)           | 11.13 | 18.27 | 1 (429)  | 100



### Colored puzzles

```
for i in 11360 12924 13951 15711 2014 2021 2518 3408 5353 6098 7598 7959 8364 10266 10295 11059 11443 11924 12987 13932 13983 14040 14442 14691 14913 14918 15082 15233 15370; do
    echo "Solving PBN's puzzle #$i (http://webpbn.com/$i) ..."
    /usr/bin/time -f 'Total: %U' python -m pynogram --pbn ${i} --draw-final --max-solutions=2 -v 3>&- 2>/dev/null 3>&1 1>&2 2>&3 |
    grep -iP 'contradiction|Total'
    echo
done
```

| #         | Contradictions found | Solution rate, % | Time, sec | Solutions found | Search depth |
|-----------|:--------------------:|-----------------:|----------:|----------------:|-------------:|
| 11360     | 6                    | 100              |   0.66
| 12924     | 1                    | 100              |   0.11
| 13951     | 1                    | 100              |   0.10
| **15711** | 0                    | 84               |  14.26    | 2               | 27
| **2014**  | 0                    | 99.5             |   0.28    | 2               | 1
| 2021      | 1                    | 100              |   0.11
| 2518      | 12                   | 100              |   0.92
| 3408      | 2                    | 100              |   0.20
| **5353**  | 0                    | 96.6667          |   1.82    | 2               | 0
| 6098      | 1                    | 100              |   0.73
| **7598**  | 0                    | 83.6667          |   8.78    | 2               | 23
| 7959      | 1                    | 100              |   0.12
| 8364      | 1                    | 100              |   0.12
| **10266** | 0                    | 84               |   1.35    | 2               | 23
| **10295** | 4, 0                 | 98.4167          |   5.23    | 2               | 6
| **11059** | 0                    | 96               |   0.16    | 2               | 1
| **11443** | 0                    | 68               |   0.14    | 2               | 0
| 11924     | 1                    | 100              |   0.15
| 12987     | 1                    | 100              |   0.16
| 13932     | 1                    | 100              |   0.15
| 13983     | 1                    | 100              |   0.12
| 14040     | 1                    | 100              |   0.12
| 14442     | 1                    | 100              |   0.12
| **14691** | 0                    | 98.6667          |   0.54    | 2               | 0
| 14913     | 2                    | 100              |   0.30
| 14918     | 1                    | 100              |   0.17
| 15082     | 1                    | 100              |   0.13
| **15233** | 0                    | 98.8571          |   0.31    | 2               | 1
| 15370     | 1                    | 100              |   0.16



## Long-solved board (more than 5 minutes, the first 23000 of webpbn's puzzles):

```
$ bash tests/bench.sh {1..23000} 2>&1 >> bench.log &
# and wait for several hours...

$ while read t
  do
    id=$(grep -P ${t} ${log_file} -A2 | grep -oP '#\K(\d+)' | awk '{print $1-1}')
    echo "$id: $t"
  done < <(grep -oP 'Total: \K(.+)' bench.log | sort -gr | awk '$1 > 300')
```

| #         |  Solution rate, % | Time, sec | Solutions found | Search depth | Cache hit rate, % |
|-----------|:-----------------:|----------:|----------------:|-------------:|------------------:|
| -- black and white:
| 607       | 58.56             | 57        | 2               | 18           | 92.19
| **2556**  | 92.72             | 43        | 2               | 50           | 96.76
| 2647      | 70.33             | 488       | 4               | 263          | 99.06
| **2712**  | 54.78             | >1200     | 0               | 35           | 98.04
| 2903      | 62.61 -> 62.69    | >1200     | 1               | 4            | 99.06
| 3162      | 83.14 -> 86.00    | 122       | 1               | 3            | 96.51
| 3163      | 23.68 -> 23.73    | >1200     | 1               | 12           | 98.02
| 3335      | 0 -> 0.25         | >1200     | 1               | 5            | 99.40
| 3379      | 55.88             | >1200     | 1               | 18           | 99.20
| 3469      | 0                 | 7         | 1               | 4            | 92.65
| _3867_    | 87.10             | 847       | 2               | 79           | 96.26
| 5005      | 46.50 -> 54.75    | 8         | 1               | 1            | 94.00
| **6574**  | 29.6              | >1200     | 1               | 23           | 99.09
| 7290      | 56.6              | 88        | 4               | 70           | 97.46
| 7382      | 62.84             | 78        | 2               | 45           | 94.45
| **8098**  | 0                 | >1200     | 1               | 59           | 98.50
| **9892**  | 33.30             | >1200     | 0               | 32           | 97.65
| **10088** | 23.60             | >1200/681 | 0/2             | 87/155       | 96.62
| 12534     | 35.87             | 33        | 3               | 48           | 93.81
| **12548** | 18.56             | >1200     | 0               | 178          | 98.94
| 13480     | 12.68             | >1200     | 0               | 212          | 98.73
| 16141     | 88.91             | 68        | 2               | 22           | 91.62
| 16435     | 24.67 -> 34.67    | 161       | 1               | 3            | 96.60
| 16900     | 48.06             | >1200     | 0               | 74/93        | 96.98
| **18297** | 13.49             | >1200     | 0               | 64           | 97.51
| 18980     | 76 -> 80          | 3         | 1               | 3            | 87.05
| 19080     | 00.12             | >1200     | 0               | 400 (hard limit) | 98.56
| 20058     | 49.40             | 566       | 2               | 351          | 98.95
| 20761     | 25.11 -> 25.56    | >1200     | 1               | 2            | 99.32
| **22336** | 42.68 -> 42.70    | >1200     | 0               | 15/20        | 98.21
| 22792     | 100               | 2         | 1               | 0            | 75.54
| 22949     | 100               | 12        | 1               | 0            | 70.03
|
| -- colored:
| 510       | 83.76             | 239       | 2               | 6            | 99.52
| **672**   | 76.38             | >1200     | 0               | 32           | 98.56
| 1677      | 90.60 -> 91.79    | 440       | 1               | 7            | 96.19
| 2166      | 69.67             | >1200     | 1               | 10           | 97.10
| **2498**  | 90.68             | >1200/1309| 0/2             | 40/63        | 94.29
| **2684**  | 95.33             | >1200     | 0               | 47           | 94.75
| 2798      | 100               | 34        | 1               | 0            | 63.08
| 3073      | 96.41 -> 96.73    | 162       | 1               | 1            | 95.56
| 3085      | 88.91             | >1200     | 0               | 49           | 97.04
| 3114      | 81.61             | >1200     | 0               | 23/16        | 87.69
| **3149**  | 78.62             | >1200     | 0               | 98           | 88.59
| 3263      | 97.23             | >1200     | 1               | 8            | 98.76
| **3620**  | 85.81             | >1200/16  | 0/2             | 51/25        | 99.54
| 3883      | 93.46             | >1200/329 | 0/2             | 42/15        | 98.36
| **4364**  | 97.42 -> 97.47    | >1200     | 1               | 6            | 98.36
| **4445**  | 93.98             | >1200     | 1/0             | 20/27        | 86.96
| 4518      | 94.73 -> 94.76    | >1200     | 1               | 3            | 98.99
| 4581      | 76 -> 76.17       | >1200     | 1               | 6            | 98.75
| **4809**  | 89.58             | 328       | 2               | 28           | 84.87
| 4905      | 93.92 -> 94.50    | 112       | 1               | 1            | 94.30
| 5260      | 93.75             | 3/10      | 2               | 13/38        | 88.07
| 5380      | 87.32             | >1200/286 | 0/2             | 92/44        | 99.23
| 5381      | 98.44             | 109       | 2               | 20           | 87.88
| 6406      | 92.74 -> 92.77    | >1200     | 1               | 13           | 98.44
| 6621      | 84.53             | 162/472   | 2               | 35/89        | 96.68
| 6704      | 92.97             | 341       | 2               | 74           | 95.77
| 7333      | 92.22             | 84        | 2               | 34           | 91.21
| 7541      | 97.13             | >1200     | 0               | 17           | 96.82
| 7778      | 85.98             | >1200     | 0 (prev. 3)     | 15           | 81.64
| 7817      | 85.19             | >1200     | 0               | 71           | 95.46
| 8252      | 92.53             | 44/99     | 3               | 23/50        | 90.60
| 8825      | 89.73             | >1200/336 | 0/2             | 55/98        | 94.74
| 9616      | 92.13             | 366       | 2               | 129          | 96.24
| 9786      | 63.35             | >1200     | 0               | 45           | 98.37
| 9891      | 72.84             | >1200     | 0               | 19           | 95.71
| 10055     | 96.48 -> 96.92    | 62        | 1               | 1            | 88.37
| 10282     | 91.63 -> 91.66    | 253       | 3               | 23           | 86.62
| 10448     | 70.56             | 442/294   | 3/2             | 92/60        | 80.33
| 10585     | 85.85             | >1200     | 0               | 47           | 97.40
| 11026     | 80.96             | >1200     | 0 (prev. 2)     | 32           | 97.80
| 11058     | 92.89             | >1200     | 0 (prev. 2)     | 42           | 98.39
| 11341     | 72.44             | 326/259   | 5               | 146/118      | 95.04
| 11518     | 98.31 -> 98.58    | 1006      | 1               | 7            | 97.98
| 11546     | 60.69             | 111/81    | 3/2             | 61/52        | 88.80
| 11884     | 68.22             | 212/1038  | 2               | 39/219       | 97.89
| 12831     | 90.75             | >1200/380 | 0/2             | 61/31        | 88.96
| 14164     | 97.42 -> 97.83    | 149       | 1               | 6            | 95.28
| 14579     | 94.12 -> 94.75    | 66        | 1               | 1            | 90.59
| 14717     | 84.00             | >1200     | 0               | 84           | 98.24
| 15101     | 87.62             | 170       | 2               | 114          | 95.25
| 15225     | 97.85 -> 98.03    | 523       | 1               | 9            | 93.35
| 15430     | 69.38 -> 69.43    | >1200     | 1               | 2            | 98.47
| 16393     | 78.72             | >1200/1220| 0/2             | 74/76        | 93.83
| 16712     | 89                | 640       | 2               | 137          | 97.59
| 16766     | 96.04             | 61        | 2               | 11           | 85.28
| 16820     | 88.91             | >1200/599 | 0/3             | 56/31        | 98.44
| 16838     | 68.92             | >1200     | 0               | 11           | 92.88
| 16878     | 86.22             | >1200     | 0               | 22           | 96.67
| 16905     | 96.69             | 1624      | 2               | 0            | 90.43
| 17045     | 95.96             | 116       | 4               | 22           | 90.45
| 17459     | 92.98 -> 92.99    | 914/525   | 2               | 72/37        | 87.27
| 18290     | 37 (prev. 37.5)   | 554/335   | 2 (prev. 4)     | 70/103       | 85.16
| 19793     | 81.78             | >1200     | 1               | 4            | 98.11
| 20607     | 95.96             | 90        | 2               | 17           | 93.90
| 21643     | 97.77 -> 97.78    | >1200     | 1               | 8            | 97.87
| 22027     | 99.06             | 795/509   | 4               | 55/34        | 92.48
| 22169     | 86.06             | >1200     | 0               | 40           | 97.57
| 22284     | 89.82             | 102/29    | 2/4             | 32/15        | 55.89
| 22569     | 98.64 -> 98.81    | 204       | 1               | 1            | 94.88


**Bold** puzzles are from http://webpbn.com/survey/ (_italic_ puzzles are mentioned there too).
