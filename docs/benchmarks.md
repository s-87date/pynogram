### Benchmark on complex puzzles (remove `2>/dev/null` to see the picture)

```
# use redirection tricks to swap outputs to grep only logs, not the picture
# https://stackoverflow.com/a/2381643/1177288

# http://webpbn.com/pbnsolve.html
for i in 1611 1694 6739 4645 2040 2712 6574 8098 2556; do
    echo "Solving PBN's puzzle #$i (http://webpbn.com/$i) ..."
    time python -m pynogram --pbn $i --timeout=1200 --max-solutions=2 --draw-final -v 3>&- 2>/dev/null 3>&1 1>&2 2>&3 |
        grep -i contradict
done

for i in football einstein MLP; do
    echo "Solving local puzzle $i ..."
    time python -m pynogram --board $i --draw-final -v 3>&- 2>/dev/null 3>&1 1>&2 2>&3 |
        grep -i contradict
done
```

Currently it gives these numbers on the fast (_Intel(R) Xeon(R) CPU E3-1275 v5 @ 3.60GHz_)
and slower (_Intel(R) Core(TM) i5 CPU  M 560  @ 2.67GHz_) CPUs:

| Name      | Fast CPU, sec | Slow CPU, sec | Contradictions found | Solution rate, % | Solutions found | Search depth |
|-----------|--------------:|--------------:|:--------------------:|-----------------:|----------------:|-------------:|
|-- webpbn.com --
| 1611      | 1.74          | 2.34          | 18                   | 100
| 1694      | 2.14          | 3.93          | 99                   | 100
| **6739**  | 2.90          | 5.05          | 95                   | **98.5625**      | 3 | 1
| 4645      | 5.16          | 9.14          | 33                   | 100
| 2040      | 6.20          | 11.49         | 204                  | 100
| **2712**  | >1200         | >1200         | 149, 8               | **54.7759**      | 0 | 31
| **6574**  | >1200         | >1200         | 44, 2                | **29.6**         | 1 | 97
| **8098**  | >1200         | >1200         | 0                    | **0**            | 1 | 75
| **2556**  | 40            | 70            | 8                    | **92.7179**      | 2 | 50
|-- Local --
| [football](../pynogram/examples/football.txt) | 0.41  | 0.52  | 1 (6)    | 100
| [einstein](../pynogram/examples/einstein.txt) | 1.42  | 1.96  | 0        | 100
| [MLP](../pynogram/examples/MLP.txt)           | 11.13 | 18.27 | 1 (429)  | 100



### Colored puzzles

```
for i in 11360 12924 13951 15711 2014 2021 2518 3408 5353 6098 7598 7959 8364 10266 10295 11059 11443 11924 12987 13932 13983 14040 14442 14691 14913 14918 15082 15233 15370; do
    echo "Solving PBN's puzzle #$i (http://webpbn.com/$i) ..."
    /usr/bin/time -f 'Total: %U' python -m pynogram --pbn ${i} --draw-final --max-solutions=2 -v 3>&- 2>/dev/null 3>&1 1>&2 2>&3 |
    grep -iP 'contradiction|Total'
    echo
done
```

| #         | Contradictions found | Solution rate, % | Time, sec | Solutions found | Search depth |
|-----------|:--------------------:|-----------------:|----------:|----------------:|-------------:|
| 11360     | 6                    | 100              |   1.15
| 12924     | 1                    | 100              |   0.21
| 13951     | 1                    | 100              |   0.19
| **15711** | 0, 0                 | 84               | 127.79    | 2 | 111
| **2014**  | 0, 0                 | 99.5             |   0.6     | 2 | 1
| 2021      | 1                    | 100              |   0.22
| 2518      | 12                   | 100              |   1.84
| 3408      | 2                    | 100              |   0.40
| **5353**  | 0, 0                 | 96.6667          |   7.10    | 2 | 0
| 6098      | 1                    | 100              |   1.88
| **7598**  | 0, 0                 | 83.6667          |  74.78    | 2 | 83
| 7959      | 1                    | 100              |   0.20
| 8364      | 1                    | 100              |   0.24
| **10266** | 0, 0                 | 84               |   2.64    | 2 | 23
| **10295** | 4, 0                 | 98.4167          |  12.66    | 2 | 6
| **11059** | 0, 0                 | 96               |   0.31    | 2 | 1
| **11443** | 0, 0                 | 68               |   0.34    | 2 | 0
| 11924     | 1                    | 100              |   0.19
| 12987     | 1                    | 100              |   0.18
| 13932     | 1                    | 100              |   0.20
| 13983     | 1                    | 100              |   0.20
| 14040     | 1                    | 100              |   0.24
| 14442     | 1                    | 100              |   0.19
| **14691** | 0, 0                 | 98.6667          |   1.12    | 2 | 0
| 14913     | 2                    | 100              |   0.40
| 14918     | 1                    | 100              |   0.20
| 15082     | 1                    | 100              |   0.17
| **15233** | 0, 0                 | 98.8571          |   0.54    | 2 | 1
| 15370     | 1                    | 100              |   0.19



## Long-solved board (more than 5 minutes, the first 23000 of webpbn's puzzles):

```
$ bash tests/bench.sh {1..23000} 2>&1 >> bench.log &
# and wait for several hours...

$ while read t
  do
    id=$(grep -P ${t} ${log_file} -A2 | grep -oP '#\K(\d+)' | awk '{print $1-1}')
    echo "$id: $t"
  done < <(grep -oP 'Total: \K(.+)' bench.log | sort -gr | awk '$1 > 300')
```

| #         |  Solution rate, % | Time, sec | Solutions found | Search depth |
|-----------|:-----------------:|----------:|----------------:|-------------:|
| -- black and white:
| 607       | 58.56             | 95        | 2               | 18
| **2556**  | 92.72             | 43        | 2               | 50
| 2647      | 70.33             | 500       | 4               | 263
| **2712**  | 54.78             | >1200     | 0               | 31
| 2903      | 62.61             | >1200     | 1               | 4
| 3162      | 83.14             | 127       | 1               | 3
| 3163      | 23.68             | >1200     | 1               | 12
| 3335      | 0                 | >1200     | 1               | 5
| 3379      | 55.88             | >1200     | 1               | 18
| 3469      | 0                 | 14        | 1               | 4
| 3867      | 87.1              | 998       | 2               | 79
| 5005      | 46.5              | 8         | 1               | 1
| **6574**  | 29.6              | >1200     | 1               | 23
| 7290      | 56.6              | 99        | 4               | 70
| 7382      | 62.84             | 87        | 2               | 45
| **8098**  | 0                 | >1200     | 1               | 59
| **9892**  | 33.3              | >1200     | 0               | 29
| 12534     | 35.87             | 41        | 3               | 48
| **12548** | 18.56             | >1200     | 0               | 178
| 13480     | 12.68             | >1200     | 0               | 212
| 16141     | 88.91             | 59        | 2               | 22
| 16435     | 24.67             | 171       | 1               | 3
| 16900     | 48.06             | >1200     | 0               | 74
| **18297** | 13.49             | >1200     | 0               | 62
| 18980     | 76                | 3         | 1               | 3
| 19080     | 00.12             | 1061      | 0 | TOO DEEP (maximum recursion depth exceeded)
| 20761     | 25.11             | >1200     | 1               | 2
| **22336** | 42.68             | >1200     | 0               | 15
| 22792     | 100               | 2         | 1               | 0
| 22949     | 100               | 13        | 1               | 0
|
| -- colored:
| 510       | 83.76             | 252       | 2               | 6
| **672**   | 76.38             | >1200     | 0               | 32
| 1677      | 90.60             | 431       | 1               | 7
| 2166      | 69.67             | >1200     | 1               | 10
| **2498**  | 90.68             | >1200     | 0               | 42
| **2684**  | 95.33             | >1200     | 0               | 47
| 2798      | 100               | 32        | 1               | 0
| 3073      | 96.41             | 169       | 1               | 1
| 3085      | 88.91             | >1200     | 0               | 33
| 3114      | 81.61             | >1200     | 0               | 24
| **3149**  | 78.62             | >1200     | 0               | 84
| 3263      | 97.23             | >1200     | 1               | 8
| **3620**  | 85.81             | >1200     | 0               | 51
| 3883      | 93.46             | 329       | 2               | 15
| **4364**  | 97.42             | >1200     | 1               | 6
| **4445**  | 93.98             | >1200     | 1               | 20
| 4518      | 94.73             | >1200     | 1               | 3
| 4581      | 76                | >1200     | 1               | 6
| **4809**  | 89.58             | 368       | 2               | 28
| 4905      | 93.92             | 126       | 1               | 1
| 5260      | 93.75             | 3         | 2               | 13
| 5381      | 98.44             | 73        | 2               | 14
| 6406      | 92.74             | >1200     | 1               | 13
| 6621      | 84.53             | 470       | 2               | 89
| 6704      | 92.97             | 353       | 2               | 74
| 7333      | 92.22             | 73        | 2               | 34
| 7541      | 97.13             | >1200     | 0               | 17
| 7778      | 85.98             | >1200     | 0 (prev. 3)     | 15
| 8252      | 92.53             | 99        | 3               | 50
| 9786      | 63.35             | >1200     | 0               | 45
| 10055     | 96.48             | 61        | 1               | 1
| 10282     | 91.63             | 253       | 3               | 23
| 10585     | 85.85             | >1200     | 0               | 46
| 11026     | 80.96             | >1200     | 0 (prev. 2)     | 23
| 11518     | 98.31             | 1087      | 1               | 7
| 11546     | 60.69             | 101       | 2               | 60
| 12831     | 90.75             | >1200     | 0               | 61
| 14164     | 97.42             | 163       | 1               | 6
| 14579     | 94.12             | 71        | 1               | 1
| 15101     | 87.62             | 192       | 2               | 114
| 15225     | 97.85             | 573       | 1               | 9
| 15430     | 69.38             | >1200     | 1               | 2
| 16393     | 78.72             | >1200     | 0               | 74
| 16766     | 96.04             | 65        | 2               | 11
| 16820     | 88.91             | >1200     | 0               | 52
| 16838     | 68.92             | >1200     | 0               | 7
| 16878     | 86.22             | >1200     | 0               | 19
| 16905     | 96.69             | 1789      | 2               | 0
| 17045     | 95.96             | 116       | 4               | 21
| 17459     | 92.98             | 914       | 2               | 72
| 18290     | 37 (prev. 37.5)   | 554       | 4               | 70
| 19793     | 81.78             | >1200     | 1               | 4
| 20607     | 95.96             | 84        | 2               | 17
| 21643     | 97.77             | >1200     | 1               | 8
| 22027     | 99.06             | 813       | 4               | 55
| 22169     | 86.06             | >1200     | 0               | 40
| 22284     | 89.82             | 97        | 2               | 32
| 22569     | 98.64             | 195       | 1               | 1



Bold puzzles are from http://webpbn.com/survey/
