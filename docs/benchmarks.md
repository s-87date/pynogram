### Benchmark on complex puzzles (remove `2>/dev/null` to see the picture)

```
# use redirection tricks to swap outputs to grep only logs, not the picture
# https://stackoverflow.com/a/2381643/1177288

# http://webpbn.com/pbnsolve.html
for i in 1611 1694 6739 4645 2040 2712 6574 8098 2556; do
    echo "Solving PBN's puzzle #$i (http://webpbn.com/$i) ..."
    time python -m pynogram --pbn $i --timeout=300 --max-solutions=2 --draw-final -v 3>&- 2>/dev/null 3>&1 1>&2 2>&3 |
        grep -i contradict
done

for i in football einstein MLP; do
    echo "Solving local puzzle $i ..."
    time python -m pynogram --board $i --draw-final -v 3>&- 2>/dev/null 3>&1 1>&2 2>&3 |
        grep -i contradict
done
```

Currently it gives these numbers on the fast (_Intel(R) Xeon(R) CPU E3-1275 v5 @ 3.60GHz_)
and slower (_Intel(R) Core(TM) i5 CPU  M 560  @ 2.67GHz_) CPUs:

| Name      | Fast CPU, sec | Slow CPU, sec | Contradictions found | Solution rate, % | Solutions found | Search depth |
|-----------|--------------:|--------------:|:--------------------:|-----------------:|----------------:|-------------:|
|-- webpbn.com --
| 1611      | 1.74          | 2.34          | 18                   | 100
| 1694      | 2.14          | 3.93          | 99                   | 100
| **6739**  | 2.90          | 5.05          | 95, 0                | **98.5625**      | 3 | 1
| 4645      | 5.16          | 9.14          | 33                   | 100
| 2040      | 6.20          | 11.49         | 204                  | 100
| **2712**  | 10.26         | > 300         | 149, 8               | **54.7759**      | 0 | 24
| **6574**  | 1.88          | 3.09          | 44, 2                | **29.6**         | 0 | 31
| **8098**  | 0.62          | > 300         | 0, 0                 | **0**            | 1 | 69
| **2556**  | 1.80          | 2.54          | 8, 0                 | **92.7179**      | 0 | 56
|-- Local --
| [football](../pynogram/examples/football.txt) | 0.41  | 0.52  | 1 (6)    | 100
| [einstein](../pynogram/examples/einstein.txt) | 1.42  | 1.96  | 0        | 100
| [MLP](../pynogram/examples/MLP.txt)           | 11.13 | 18.27 | 1 (429)  | 100



### Colored puzzles

```
for i in 11360 12924 13951 15711 2014 2021 2518 3408 5353 6098 7598 7959 8364 10266 10295 11059 11443 11924 12987 13932 13983 14040 14442 14691 14913 14918 15082 15233 15370; do
    echo "Solving PBN's puzzle #$i (http://webpbn.com/$i) ..."
    /usr/bin/time -f 'Total: %U' python -m pynogram --pbn ${i} --draw-final --max-solutions=2 -v 3>&- 2>/dev/null 3>&1 1>&2 2>&3 |
    grep -iP 'contradiction|Total'
    echo
done
```

| #         | Contradictions found | Solution rate, % | Time, sec | Solutions found | Search depth |
|-----------|:--------------------:|-----------------:|----------:|----------------:|-------------:|
| 11360     | 6                    | 100              |   1.15
| 12924     | 1                    | 100              |   0.21
| 13951     | 1                    | 100              |   0.19
| **15711** | 0, 0                 | 84               | 127.79    | 2 | 111
| **2014**  | 0, 0                 | 99.5             |   0.6     | 2 | 1
| 2021      | 1                    | 100              |   0.22
| 2518      | 12                   | 100              |   1.84
| 3408      | 2                    | 100              |   0.40
| **5353**  | 0, 0                 | 96.6667          |   7.10    | 2 | 0
| 6098      | 1                    | 100              |   1.88
| **7598**  | 0, 0                 | 83.6667          |  74.78    | 2 | 83
| 7959      | 1                    | 100              |   0.20
| 8364      | 1                    | 100              |   0.24
| **10266** | 0, 0                 | 84               |   2.64    | 2 | 23
| **10295** | 4, 0                 | 98.4167          |  12.66    | 2 | 6
| **11059** | 0, 0                 | 96               |   0.31    | 2 | 1
| **11443** | 0, 0                 | 68               |   0.34    | 2 | 0
| 11924     | 1                    | 100              |   0.19
| 12987     | 1                    | 100              |   0.18
| 13932     | 1                    | 100              |   0.20
| 13983     | 1                    | 100              |   0.20
| 14040     | 1                    | 100              |   0.24
| 14442     | 1                    | 100              |   0.19
| **14691** | 0, 0                 | 98.6667          |   1.12    | 2 | 0
| 14913     | 2                    | 100              |   0.40
| 14918     | 1                    | 100              |   0.20
| 15082     | 1                    | 100              |   0.17
| **15233** | 0, 0                 | 98.8571          |   0.54    | 2 | 1
| 15370     | 1                    | 100              |   0.19



## Long-solved board (more than 5 minutes, the first 23000 of webpbn's puzzles):

```
$ bash tests/bench.sh {1..23000} 2>&1 >> bench.log &
# and wait for several hours...

$ while read t
  do
    id=$(grep -P ${t} ${log_file} -A2 | grep -oP '#\K(\d+)' | awk '{print $1-1}')
    echo "$id: $t"
  done < <(grep -oP 'Total: \K(.+)' bench.log | sort -gr | awk '$1 > 300')
```

| #         |  Solution rate, % | Time, sec | Solutions found | Search depth |
|-----------|:-----------------:|----------:|----------------:|-------------:|
| -- black and white:
| 607       | 58.56             | >1200     | 0               | 12
| **2556**  | 92.72             | >1200     | 0               | 14
| **2712**  | 54.78             | >1200     | 0               | 122
| 2903      | 62.29             | >1200     | 1               | 28
| 3162      | 83.14             | >1200     | 1               | 63
| 3163      | 23.68             | >1200     | 0               | 4
| 3335      | 0                 | >1200     | 1               | 18
| 3379      | 55.75             | >1200     | 1               | 31
| 3469      | 0                 | >1200     | 1               | 16
| 3867      | 87.1              | >1200     | 0               | 32
| 5005      | 46.5              | >1200     | 1               | 28
| **6574**  | 29.6              | >1200     | 0               | 85
| 7290      | 56.6              | >1200     | 0               | 10
| 7382      | 62.8              | >1200     | 0               | 27
| **8098**  | 0                 | >1200     | 1               | 27
| **9892**  | 33.3              | >1200     | 0               | 20
| 12534     | 35.87             | >1200     | 0               | 20
| **12548** | 18.56             | >1200     | 0               | 54
| 13480     | 12.68             | >1200     | 0               | 75
| 16141     | 88.91             | >1200     | 0               | 13
| 16435     | 24.67             | >1200     | 1               | 92(91)
| 16900     | 48.04             | >1200     | 0               | 37
| **18297** | 13.43             | >1200     | 0               | 7
| 18980     | 76                | >1200     | 1               | 11
| 19080     | 00.12             | 742(745)  | 2               | 152
| 20761     | 24.78             | >1200     | 1               | 5
| **22336** | 42.68             | >1200     | 0               | 6(5)
| 22792     | 66.8              | >1200     | 1               | 4(3)
| 22949     | 65                | >1200     | 1               | 2
|
| -- colored:
| 510       | 83.76             | 271       | 2               | 6
| **672**   | 76.38             | >1200     | 0               | 46
| 1677      | 90.54             | >1200     | 0               | 2
| 2166      | 69.67             | >1200     | 1               | 27
| **2498**  | 90.65             | >1200     | 0               | 39
| 2684      | 95.33             | >1200     | 0               | 15
| 2798      | 91.4              | >1200     | 1               | 1
| 3073      | 96.2              | >1200     | 1               | 14
| 3085      | 88.91             | >1200     | 0               | 5
| 3114      | 81.6              | >1200     | 0               | 3
| **3149**  | 78.62             | >1200     | 0               | 10
| 3263      | 97.23             | >1200     | 1               | 43
| **3620**  | 85.81             | >1200     | 0               | 23
| 3883      | 93.46             | >1200     | 0               | 48
| **4364**  | 97.42             | >1200     | 1               | 35
| **4445**  | 93.97             | >1200     | 0               | 11
| 4518      | 94.73             | >1200     | 1               | 7
| 4581      | 76                | >1200     | 1               | 39
| **4809**  | 89.58             | >1200     | 0               | 14(13)
| 4905      | 93.92             | >1200     | 1               | 39(41)
| 5260      | 93.75             | >1200     | 0               | 11
| 5381      | 98.44             | >1200     | 0               | 10
| 6406      | 92.74             | >1200     | 1               | 14
| 6621      | 84.53             | 773(>1200)| 2(0)            | 86(36)
| 6704      | 92.97             | >1200     | 0               | 13
| 7333      | 92.22             | >1200     | 0               | 19
| 7541      | 97.13             | >1200     | 0               | 9
| 7778      | 85.98             | >1200     | 3(0)            | 24(19)
| 8252      | 92.53             | >1200     | 0               | 16
| 9786      | 63.35             | >1200     | 0               | 10
| 10055     | 96.48             | >1200     | 1               | 11
| 10282     | 91.63             | >1200     | 0               | 36
| 10585     | 85.85             | >1200     | 0               | 12
| 11026     | 80.96             | 923(1060) | 2               | 59(66)
| 11518     | 98.3              | >1200     | 1               | 15
| 11546     | 60.69             | >1200     | 0               | 37(40)
| 12831     | 90.75             | >1200     | 0               | 18(19)
| 14164     | 97.42             | >1200     | 1               | 4
| 14579     | 94.12             | >1200     | 1               | 8(7)
| 15101     | 87.62             | >1200     | 0               | 52(48)
| 15225     | 97.85             | >1200     | 1               | 14(24)
| 15430     | 69.38             | >1200     | 0               | 12(25)
| 16393     | 78.72             | >1200     | 0               | 19
| 16766     | 96.04             | >1200     | 0               | 33
| 16820     | 88.91             | >1200     | 0               | 30(22)
| 16838     | 68.9              | >1200     | 0               | 7(6)
| 16878     | 86.1              | >1200     | 0               | 18
| 16905     | 92.89             | 710(740)  | 2               | 0
| 17045     | 95.96             | >1200     | 0               | 18
| 17459     | 92.98             | >1200     | 0               | 56(50)
| 18290     | 37.5              | >1200     | 0               | 16(23)
| 19793     | 81.72             | >1200     | 1               | 16(75)
| 20607     | 95.96             | >1200     | 0               | 18
| 21643     | 97.77             | >1200     | 1               | 20
| 22027     | 99.06             | >1200(283)| 0(4)            | 23(18)
| 22169     | 86.06             | >1200     | 0               | 84(47)
| 22284     | 89.82             | >1200     | 0               | 16(15)
| 22569     | 98.64             | >1200     | 1               | 4



Bold puzzles are from http://webpbn.com/survey/
